<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Content Generation Engine</title>
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <style>
        .content-card {
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            background: rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        .content-card:hover {
            border-color: var(--bs-primary);
            box-shadow: 0 4px 20px rgba(0,123,255,0.3);
        }
        .generation-type {
            cursor: pointer;
            padding: 1rem;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .generation-type.active {
            border-color: var(--bs-primary);
            background: rgba(0,123,255,0.1);
        }
        .generated-content {
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
            padding: 1rem;
            border-left: 4px solid var(--bs-success);
        }
        .loading-animation {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--bs-primary);
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .content-preview {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 1rem;
        }
        .suggestion-pill {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .suggestion-pill:hover {
            background: var(--bs-primary);
            transform: translateY(-2px);
        }
        .image-preview {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-4">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col">
                <h1 class="display-6">🎨 AI Content Generation Engine</h1>
                <p class="text-muted">Αυτόματη δημιουργία κειμένων, εικόνων, video concepts και μουσικής με τεχνητή νοημοσύνη</p>
            </div>
        </div>

        <!-- Content Type Selection -->
        <div class="row mb-4">
            <div class="col">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">📝 Επιλέξτε Τύπο Περιεχομένου</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-2">
                                <div class="generation-type text-center" data-type="text" onclick="selectContentType('text')">
                                    <i class="fas fa-file-alt fa-2x mb-2 text-primary"></i>
                                    <h6>Κείμενο</h6>
                                    <small class="text-muted">Άρθρα, διαφημίσεις, posts</small>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="generation-type text-center" data-type="image" onclick="selectContentType('image')">
                                    <i class="fas fa-image fa-2x mb-2 text-warning"></i>
                                    <h6>Εικόνες</h6>
                                    <small class="text-muted">Logos, illustrations</small>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="generation-type text-center" data-type="video" onclick="selectContentType('video')">
                                    <i class="fas fa-video fa-2x mb-2 text-danger"></i>
                                    <h6>Video Concept</h6>
                                    <small class="text-muted">Storyboards, scripts</small>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="generation-type text-center" data-type="music" onclick="selectContentType('music')">
                                    <i class="fas fa-music fa-2x mb-2 text-info"></i>
                                    <h6>Μουσική</h6>
                                    <small class="text-muted">Concepts, structures</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="generation-type text-center" data-type="campaign" onclick="selectContentType('campaign')">
                                    <i class="fas fa-bullhorn fa-2x mb-2 text-success"></i>
                                    <h6>Πλήρης Καμπάνια</h6>
                                    <small class="text-muted">Κείμενα + Εικόνες + Video</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Text Content Generation -->
        <div class="row mb-4" id="textGenerationSection" style="display: none;">
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">📝 Δημιουργία Κειμένου</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Κατηγορία</label>
                            <select class="form-select" id="textCategory">
                                <option value="">Επιλέξτε κατηγορία...</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Template</label>
                            <select class="form-select" id="textTemplate">
                                <option value="">Πρώτα επιλέξτε κατηγορία...</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Προδιαγραφές (JSON)</label>
                            <textarea class="form-control" id="textSpecifications" rows="4" 
                                placeholder='{"brand": "My Company", "goal": "increase sales", "audience": "young adults"}'></textarea>
                        </div>
                        <button class="btn btn-primary" onclick="generateTextContent()">
                            <span id="textLoadingSpinner" class="loading-animation d-none"></span>
                            Δημιουργία Κειμένου
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">📄 Αποτέλεσμα</h5>
                    </div>
                    <div class="card-body">
                        <div id="textResult" class="content-preview">
                            <div class="text-muted text-center">
                                Το περιεχόμενο θα εμφανιστεί εδώ...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image Generation -->
        <div class="row mb-4" id="imageGenerationSection" style="display: none;">
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">🎨 Δημιουργία Εικόνας</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Περιγραφή</label>
                            <textarea class="form-control" id="imageDescription" rows="3" 
                                placeholder="π.χ. A professional logo for a tech startup with blue and white colors"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Στυλ</label>
                            <select class="form-select" id="imageStyle">
                                <option value="professional">Professional</option>
                                <option value="creative">Creative</option>
                                <option value="minimalist">Minimalist</option>
                                <option value="modern">Modern</option>
                                <option value="vintage">Vintage</option>
                                <option value="playful">Playful</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Επιπρόσθετες Προδιαγραφές (JSON)</label>
                            <textarea class="form-control" id="imageSpecifications" rows="2" 
                                placeholder='{"colors": ["blue", "white"], "mood": "professional"}'></textarea>
                        </div>
                        <button class="btn btn-warning" onclick="generateImageContent()">
                            <span id="imageLoadingSpinner" class="loading-animation d-none"></span>
                            Δημιουργία Εικόνας
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">🖼️ Αποτέλεσμα</h5>
                    </div>
                    <div class="card-body">
                        <div id="imageResult" class="content-preview text-center">
                            <div class="text-muted">
                                Η εικόνα θα εμφανιστεί εδώ...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Video Concept Generation -->
        <div class="row mb-4" id="videoGenerationSection" style="display: none;">
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">🎬 Video Concept</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Θέμα</label>
                            <input type="text" class="form-control" id="videoTheme" 
                                placeholder="π.χ. Company Introduction Video">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Διάρκεια</label>
                            <select class="form-select" id="videoDuration">
                                <option value="15s">15 seconds</option>
                                <option value="30s" selected>30 seconds</option>
                                <option value="60s">1 minute</option>
                                <option value="2min">2 minutes</option>
                                <option value="5min">5 minutes</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Target Audience</label>
                            <input type="text" class="form-control" id="videoAudience" 
                                placeholder="π.χ. Young professionals, Business owners">
                        </div>
                        <button class="btn btn-danger" onclick="generateVideoContent()">
                            <span id="videoLoadingSpinner" class="loading-animation d-none"></span>
                            Δημιουργία Video Concept
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">🎞️ Αποτέλεσμα</h5>
                    </div>
                    <div class="card-body">
                        <div id="videoResult" class="content-preview">
                            <div class="text-muted text-center">
                                Το video concept θα εμφανιστεί εδώ...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Music Concept Generation -->
        <div class="row mb-4" id="musicGenerationSection" style="display: none;">
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">🎵 Music Concept</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Genre</label>
                            <select class="form-select" id="musicGenre">
                                <option value="electronic">Electronic</option>
                                <option value="ambient">Ambient</option>
                                <option value="corporate">Corporate</option>
                                <option value="cinematic">Cinematic</option>
                                <option value="pop">Pop</option>
                                <option value="rock">Rock</option>
                                <option value="jazz">Jazz</option>
                                <option value="classical">Classical</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Mood</label>
                            <select class="form-select" id="musicMood">
                                <option value="energetic">Energetic</option>
                                <option value="calm">Calm</option>
                                <option value="uplifting">Uplifting</option>
                                <option value="mysterious">Mysterious</option>
                                <option value="romantic">Romantic</option>
                                <option value="dramatic">Dramatic</option>
                                <option value="playful">Playful</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Purpose</label>
                            <select class="form-select" id="musicPurpose">
                                <option value="background">Background Music</option>
                                <option value="intro">Intro/Outro</option>
                                <option value="commercial">Commercial</option>
                                <option value="game">Video Game</option>
                                <option value="podcast">Podcast</option>
                            </select>
                        </div>
                        <button class="btn btn-info" onclick="generateMusicContent()">
                            <span id="musicLoadingSpinner" class="loading-animation d-none"></span>
                            Δημιουργία Music Concept
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">🎼 Αποτέλεσμα</h5>
                    </div>
                    <div class="card-body">
                        <div id="musicResult" class="content-preview">
                            <div class="text-muted text-center">
                                Το music concept θα εμφανιστεί εδώ...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Campaign Package Generation -->
        <div class="row mb-4" id="campaignGenerationSection" style="display: none;">
            <div class="col-md-4">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">📢 Campaign Package</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Brand Name</label>
                            <input type="text" class="form-control" id="campaignBrandName" 
                                placeholder="π.χ. TechStartup Co">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Campaign Goal</label>
                            <input type="text" class="form-control" id="campaignGoal" 
                                placeholder="π.χ. Increase brand awareness">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Target Audience</label>
                            <input type="text" class="form-control" id="campaignAudience" 
                                placeholder="π.χ. Young professionals 25-35">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Additional Brand Info (JSON)</label>
                            <textarea class="form-control" id="campaignBrandInfo" rows="3" 
                                placeholder='{"industry": "technology", "values": ["innovation", "quality"]}'></textarea>
                        </div>
                        <button class="btn btn-success" onclick="generateCampaignPackage()">
                            <span id="campaignLoadingSpinner" class="loading-animation d-none"></span>
                            Δημιουργία Πλήρους Καμπάνιας
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">📦 Campaign Package Αποτέλεσμα</h5>
                    </div>
                    <div class="card-body">
                        <div id="campaignResult" class="content-preview">
                            <div class="text-muted text-center">
                                Το πλήρες campaign package θα εμφανιστεί εδώ...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Suggestions -->
        <div class="row mb-4">
            <div class="col">
                <div class="card content-card">
                    <div class="card-header">
                        <h5 class="mb-0">💡 Γρήγορες Προτάσεις</h5>
                    </div>
                    <div class="card-body" id="suggestionsContainer">
                        <div class="text-muted text-center">
                            Φορτώνονται προτάσεις...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentContentType = '';
        let contentCategories = {};

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadContentCategories();
            loadContentSuggestions();
        });

        function selectContentType(type) {
            currentContentType = type;
            
            // Update UI
            document.querySelectorAll('.generation-type').forEach(el => {
                el.classList.remove('active');
            });
            document.querySelector(`[data-type="${type}"]`).classList.add('active');
            
            // Show appropriate section
            document.querySelectorAll('[id$="GenerationSection"]').forEach(el => {
                el.style.display = 'none';
            });
            document.getElementById(`${type}GenerationSection`).style.display = 'block';
        }

        function loadContentCategories() {
            fetch('/api/content-categories')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        contentCategories = data.categories;
                        populateTextCategories();
                    }
                })
                .catch(error => console.error('Error loading categories:', error));
        }

        function populateTextCategories() {
            const categorySelect = document.getElementById('textCategory');
            categorySelect.innerHTML = '<option value="">Επιλέξτε κατηγορία...</option>';
            
            Object.keys(contentCategories).forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                categorySelect.appendChild(option);
            });
            
            categorySelect.addEventListener('change', function() {
                populateTextTemplates(this.value);
            });
        }

        function populateTextTemplates(category) {
            const templateSelect = document.getElementById('textTemplate');
            templateSelect.innerHTML = '<option value="">Επιλέξτε template...</option>';
            
            if (category && contentCategories[category]) {
                contentCategories[category].templates.forEach(template => {
                    const option = document.createElement('option');
                    option.value = template;
                    option.textContent = template.replace('_', ' ').toUpperCase();
                    templateSelect.appendChild(option);
                });
            }
        }

        function generateTextContent() {
            const category = document.getElementById('textCategory').value;
            const template = document.getElementById('textTemplate').value;
            const specificationsText = document.getElementById('textSpecifications').value;
            
            if (!category || !template) {
                alert('Παρακαλώ επιλέξτε κατηγορία και template');
                return;
            }
            
            let specifications = {};
            if (specificationsText.trim()) {
                try {
                    specifications = JSON.parse(specificationsText);
                } catch (e) {
                    alert('Μη έγκυρο JSON format στις προδιαγραφές');
                    return;
                }
            }
            
            // Show loading
            const spinner = document.getElementById('textLoadingSpinner');
            spinner.classList.remove('d-none');
            
            fetch('/api/generate-text', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    category: category,
                    template: template,
                    specifications: specifications
                })
            })
            .then(response => response.json())
            .then(data => {
                spinner.classList.add('d-none');
                displayTextResult(data);
            })
            .catch(error => {
                spinner.classList.add('d-none');
                console.error('Error:', error);
                alert('Σφάλμα κατά τη δημιουργία περιεχομένου');
            });
        }

        function displayTextResult(data) {
            const resultDiv = document.getElementById('textResult');
            
            if (data.success) {
                const content = data.content;
                resultDiv.innerHTML = `
                    <div class="generated-content">
                        <h6>${content.title || 'Generated Content'}</h6>
                        <div class="mb-3">
                            ${content.main_content || 'No content generated'}
                        </div>
                        ${content.additional_elements ? `
                            <div class="mb-2">
                                <strong>Additional Elements:</strong>
                                <div>${content.additional_elements.join(', ')}</div>
                            </div>
                        ` : ''}
                        ${content.variants && content.variants.length > 0 ? `
                            <div class="mb-2">
                                <strong>Variants:</strong>
                                <ul>
                                    ${content.variants.map(variant => `<li>${variant}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        <small class="text-muted">
                            Word count: ${data.word_count || 0} | Generated: ${new Date(data.generated_at).toLocaleString()}
                        </small>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <strong>Error:</strong> ${data.error}
                    </div>
                `;
            }
        }

        function generateImageContent() {
            const description = document.getElementById('imageDescription').value;
            const style = document.getElementById('imageStyle').value;
            const specificationsText = document.getElementById('imageSpecifications').value;
            
            if (!description.trim()) {
                alert('Παρακαλώ εισάγετε περιγραφή για την εικόνα');
                return;
            }
            
            let specifications = {};
            if (specificationsText.trim()) {
                try {
                    specifications = JSON.parse(specificationsText);
                } catch (e) {
                    alert('Μη έγκυρο JSON format στις προδιαγραφές');
                    return;
                }
            }
            
            // Show loading
            const spinner = document.getElementById('imageLoadingSpinner');
            spinner.classList.remove('d-none');
            
            fetch('/api/generate-image', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    description: description,
                    style: style,
                    specifications: specifications
                })
            })
            .then(response => response.json())
            .then(data => {
                spinner.classList.add('d-none');
                displayImageResult(data);
            })
            .catch(error => {
                spinner.classList.add('d-none');
                console.error('Error:', error);
                alert('Σφάλμα κατά τη δημιουργία εικόνας');
            });
        }

        function displayImageResult(data) {
            const resultDiv = document.getElementById('imageResult');
            
            if (data.success) {
                resultDiv.innerHTML = `
                    <div class="generated-content">
                        <img src="${data.image_url}" alt="Generated Image" class="image-preview mb-3">
                        <div class="mb-2">
                            <strong>Prompt:</strong> ${data.prompt}
                        </div>
                        <div class="mb-2">
                            <strong>Style:</strong> ${data.style}
                        </div>
                        <small class="text-muted">
                            Generated: ${new Date(data.generated_at).toLocaleString()}
                        </small>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <strong>Error:</strong> ${data.error}
                    </div>
                `;
            }
        }

        function generateVideoContent() {
            const theme = document.getElementById('videoTheme').value;
            const duration = document.getElementById('videoDuration').value;
            const audience = document.getElementById('videoAudience').value;
            
            if (!theme.trim()) {
                alert('Παρακαλώ εισάγετε θέμα για το βίντεο');
                return;
            }
            
            // Show loading
            const spinner = document.getElementById('videoLoadingSpinner');
            spinner.classList.remove('d-none');
            
            fetch('/api/generate-video-concept', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    theme: theme,
                    duration: duration,
                    target_audience: audience
                })
            })
            .then(response => response.json())
            .then(data => {
                spinner.classList.add('d-none');
                displayVideoResult(data);
            })
            .catch(error => {
                spinner.classList.add('d-none');
                console.error('Error:', error);
                alert('Σφάλμα κατά τη δημιουργία video concept');
            });
        }

        function displayVideoResult(data) {
            const resultDiv = document.getElementById('videoResult');
            
            if (data.success) {
                const concept = data.concept;
                resultDiv.innerHTML = `
                    <div class="generated-content">
                        <h6>${concept.title || 'Video Concept'}</h6>
                        ${concept.hook ? `
                            <div class="mb-3">
                                <strong>Hook (First 3s):</strong>
                                <p>${concept.hook}</p>
                            </div>
                        ` : ''}
                        ${concept.storyboard ? `
                            <div class="mb-3">
                                <strong>Storyboard:</strong>
                                <ul>
                                    ${concept.storyboard.map(scene => `<li>${scene}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        ${concept.script ? `
                            <div class="mb-3">
                                <strong>Script:</strong>
                                <p>${concept.script}</p>
                            </div>
                        ` : ''}
                        ${concept.call_to_action ? `
                            <div class="mb-3">
                                <strong>Call to Action:</strong>
                                <p>${concept.call_to_action}</p>
                            </div>
                        ` : ''}
                        <small class="text-muted">
                            Duration: ${data.duration} | Target: ${data.target_audience} | Generated: ${new Date(data.generated_at).toLocaleString()}
                        </small>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <strong>Error:</strong> ${data.error}
                    </div>
                `;
            }
        }

        function generateMusicContent() {
            const genre = document.getElementById('musicGenre').value;
            const mood = document.getElementById('musicMood').value;
            const purpose = document.getElementById('musicPurpose').value;
            
            // Show loading
            const spinner = document.getElementById('musicLoadingSpinner');
            spinner.classList.remove('d-none');
            
            fetch('/api/generate-music-concept', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    genre: genre,
                    mood: mood,
                    purpose: purpose
                })
            })
            .then(response => response.json())
            .then(data => {
                spinner.classList.add('d-none');
                displayMusicResult(data);
            })
            .catch(error => {
                spinner.classList.add('d-none');
                console.error('Error:', error);
                alert('Σφάλμα κατά τη δημιουργία music concept');
            });
        }

        function displayMusicResult(data) {
            const resultDiv = document.getElementById('musicResult');
            
            if (data.success) {
                const concept = data.concept;
                resultDiv.innerHTML = `
                    <div class="generated-content">
                        <h6>${concept.title || 'Music Concept'}</h6>
                        ${concept.structure ? `
                            <div class="mb-2">
                                <strong>Structure:</strong> ${concept.structure}
                            </div>
                        ` : ''}
                        ${concept.instruments ? `
                            <div class="mb-2">
                                <strong>Instruments:</strong> ${concept.instruments.join(', ')}
                            </div>
                        ` : ''}
                        ${concept.tempo ? `
                            <div class="mb-2">
                                <strong>Tempo:</strong> ${concept.tempo}
                            </div>
                        ` : ''}
                        ${concept.key_signature ? `
                            <div class="mb-2">
                                <strong>Key:</strong> ${concept.key_signature}
                            </div>
                        ` : ''}
                        <small class="text-muted">
                            Genre: ${data.genre} | Mood: ${data.mood} | Generated: ${new Date(data.generated_at).toLocaleString()}
                        </small>
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <strong>Error:</strong> ${data.error}
                    </div>
                `;
            }
        }

        function generateCampaignPackage() {
            const brandName = document.getElementById('campaignBrandName').value;
            const goal = document.getElementById('campaignGoal').value;
            const audience = document.getElementById('campaignAudience').value;
            const brandInfoText = document.getElementById('campaignBrandInfo').value;
            
            if (!brandName.trim() || !goal.trim() || !audience.trim()) {
                alert('Παρακαλώ συμπληρώστε brand name, goal και target audience');
                return;
            }
            
            let brandInfo = { name: brandName };
            if (brandInfoText.trim()) {
                try {
                    const additionalInfo = JSON.parse(brandInfoText);
                    brandInfo = { ...brandInfo, ...additionalInfo };
                } catch (e) {
                    alert('Μη έγκυρο JSON format στο brand info');
                    return;
                }
            }
            
            // Show loading
            const spinner = document.getElementById('campaignLoadingSpinner');
            spinner.classList.remove('d-none');
            
            fetch('/api/generate-campaign-package', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    brand_info: brandInfo,
                    campaign_goal: goal,
                    target_audience: audience
                })
            })
            .then(response => response.json())
            .then(data => {
                spinner.classList.add('d-none');
                displayCampaignResult(data);
            })
            .catch(error => {
                spinner.classList.add('d-none');
                console.error('Error:', error);
                alert('Σφάλμα κατά τη δημιουργία campaign package');
            });
        }

        function displayCampaignResult(data) {
            const resultDiv = document.getElementById('campaignResult');
            
            if (data.success) {
                const package = data.package;
                let html = `<div class="generated-content">`;
                
                // Campaign Overview
                if (package.campaign_overview && package.campaign_overview.content) {
                    html += `
                        <div class="mb-4">
                            <h6>📋 Campaign Overview</h6>
                            <p>${package.campaign_overview.content.main_content || 'Campaign overview generated'}</p>
                        </div>
                    `;
                }
                
                // Text Content
                if (package.text_content) {
                    html += `<div class="mb-4"><h6>📝 Text Content</h6>`;
                    Object.entries(package.text_content).forEach(([key, content]) => {
                        if (content.success && content.content) {
                            html += `
                                <div class="mb-3">
                                    <strong>${key.replace('_', ' ').toUpperCase()}:</strong>
                                    <p>${content.content.main_content || 'Content generated'}</p>
                                </div>
                            `;
                        }
                    });
                    html += `</div>`;
                }
                
                // Visual Content
                if (package.visual_content && package.visual_content.main_visual && package.visual_content.main_visual.success) {
                    html += `
                        <div class="mb-4">
                            <h6>🎨 Visual Content</h6>
                            <img src="${package.visual_content.main_visual.image_url}" alt="Campaign Visual" class="image-preview" style="max-width: 300px;">
                        </div>
                    `;
                }
                
                // Video Concepts
                if (package.video_concepts && package.video_concepts.main_video && package.video_concepts.main_video.success) {
                    const video = package.video_concepts.main_video.concept;
                    html += `
                        <div class="mb-4">
                            <h6>🎬 Video Concept</h6>
                            <p><strong>Title:</strong> ${video.title || 'Video concept'}</p>
                            ${video.hook ? `<p><strong>Hook:</strong> ${video.hook}</p>` : ''}
                        </div>
                    `;
                }
                
                html += `
                    <small class="text-muted">
                        Brand: ${data.brand} | Components: ${data.components_generated} | Generated: ${new Date().toLocaleString()}
                    </small>
                </div>`;
                
                resultDiv.innerHTML = html;
            } else {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <strong>Error:</strong> ${data.error}
                    </div>
                `;
            }
        }

        function loadContentSuggestions() {
            fetch('/api/content-suggestions')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        displayContentSuggestions(data.suggestions);
                    }
                })
                .catch(error => console.error('Error loading suggestions:', error));
        }

        function displayContentSuggestions(suggestions) {
            const container = document.getElementById('suggestionsContainer');
            let html = '';
            
            Object.entries(suggestions).forEach(([category, items]) => {
                html += `
                    <div class="mb-3">
                        <h6>${category.replace('_', ' ').toUpperCase()}</h6>
                        <div class="d-flex flex-wrap gap-2">
                            ${items.map(item => `
                                <span class="badge bg-secondary suggestion-pill p-2" onclick="applySuggestion('${category}', '${item}')">
                                    ${item}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function applySuggestion(category, suggestion) {
            // Apply suggestion based on category
            if (category === 'marketing_campaigns' || category === 'website_content') {
                selectContentType('text');
                setTimeout(() => {
                    const specs = document.getElementById('textSpecifications');
                    specs.value = JSON.stringify({ suggestion: suggestion }, null, 2);
                }, 100);
            } else if (category === 'visual_concepts') {
                selectContentType('image');
                setTimeout(() => {
                    document.getElementById('imageDescription').value = suggestion;
                }, 100);
            } else if (category === 'video_themes') {
                selectContentType('video');
                setTimeout(() => {
                    document.getElementById('videoTheme').value = suggestion;
                }, 100);
            }
        }
    </script>
</body>
</html>